# Scratch4School Backend Configuration Example
# Copy this file to .env and update with your actual values

# Flask Configuration
DEBUG=False
FLASK_ENV=production
SECRET_KEY=change_this_to_a_random_secret_key

# Database Configuration
# Choose one of the following:

# Option 1: SQLite (for development/small deployments)
# DATABASE_URI=sqlite:////app/db/main.db

# Option 2: PostgreSQL (recommended for production)
DATABASE_URI=postgresql://scratch4school:your_password@postgres:5432/scratch4school

# SQLAlchemy Configuration
SQLALCHEMY_TRACK_MODIFICATIONS=False

# OAuth Configuration (IServ)
OAUTH_CLIENT_ID=your_oauth_client_id
OAUTH_CLIENT_SECRET=your_oauth_client_secret
OAUTH_AUTHORIZE_URL=https://your-iserv-domain.com/iserv/oauth/v2/auth
OAUTH_TOKEN_URL=https://your-iserv-domain.com/iserv/oauth/v2/token
OAUTH_USERINFO_URL=https://your-iserv-domain.com/iserv/public/oauth/userinfo
OAUTH_JWKS_URI=https://your-iserv-domain.com/iserv/public/jwk
OAUTH_REDIRECT_URI=https://your-scratch-domain.com/api/auth/authorize

# Frontend Configuration
FRONTEND_URL=https://your-scratch-domain.com

# Role Management
# These should be IServ group names (not role names!)
ROLE_ADMIN=admins
ROLE_TEACHER=teachers

# Docker / Kasm Configuration
# Kasm workspace image to use
KASM_IMAGE=kasmweb/ubuntu-focal-desktop:1.15.0
# Container port (Kasm default is 6901)
KASM_CONTAINER_PORT=6901
# Protocol for container connections (http or https)
# Kasm containers typically use HTTPS with self-signed certificates
KASM_CONTAINER_PROTOCOL=https
# Whether to verify SSL certificates when connecting to containers (true or false)
# Set to false for self-signed certificates (recommended for localhost)
KASM_VERIFY_SSL=false
# VNC username for accessing containers (usually kasm_user)
VNC_USER=kasm_user
# VNC password for accessing containers
VNC_PASSWORD=password
# Docker host URL for generating access URLs (without protocol)
DOCKER_HOST_URL=your-domain.com
# Protocol to use for container URLs (http or https)
DOCKER_HOST_PROTOCOL=https

# Data Directory Configuration
# Base directory for user data (persistent home directories)
USER_DATA_BASE_DIR=/data/users
# Shared public directory accessible to all users
SHARED_PUBLIC_DIR=/data/shared/public
# UID and GID for container user (Kasm default is 1000:1000)
CONTAINER_USER_ID=1000
CONTAINER_GROUP_ID=1000
